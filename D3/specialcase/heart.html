<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			html,body{
				padding: 0 0;
				margin: 0 0;
				width: 100%;
				height: 100%;
			}
			svg {
				background-color: #422;
			}
		</style>
		<script src="../js/d3.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
//			vertices = 1000
//			r = 10.0
//			t = from 0 to (2*PI)
//			p = sin(t)*sqrt(abs(cos(t)))/(sin(t) + 7/5) - 2*sin(t) + 2
//			x = p*cos(t)
//			y = p*sin(t)
			
			window.onload = function(){
				//svg绘制区域的宽度
				var width = "100%"; 
				//svg绘制区域的高度
				var height = "100%";
				
				var r = 10.0;
				var t = 0;//rom 0 to (2*PI)
				
				var getPath = function(baseX, baseY, scale){
					var paths = "";
					for (var t = 0; t < 2*Math.PI; t+=0.05) {
						//sin(t)*sqrt(abs(cos(t)))/(sin(t) + 7/5) - 2*sin(t) + 2
						var p = Math.sin(t)*Math.sqrt(Math.abs(Math.cos(t))) / 
							(Math.sin(t) + 7/5) - 2 * Math.sin(t) + 2;
						console.info(p);
						var x = p * Math.cos(t)*scale + 180 + baseX;
						var y = -p * Math.sin(t)*scale + 55 + baseY;
						
						if(t == 0){
							paths += "M" + x + " " + y + " ";
						} else {
							paths += "L" + x + " " + y + " ";
						}
					}
					paths += "Z";
					
					return paths;
				};
				
				var svg = d3.select("body").select("svg");	    //选择<body>
				var draw = function(baseX, baseY, scale, bg){
					svg.attr("width", width)	//设置<svg>的宽度属性
						.attr("height", height);	//设置<svg>的高度属性
//					var dataNode = svg.selectAll("path.dataNode");
//					dataNode.remove();
					var path = svg.append("path");
					path.attr("class", "dataRect");
					path.attr("d", getPath(baseX, baseY, scale));
					path.attr("fill", bg); //设置颜色为steelblue
					path.attr("style", "fill:url(" + bg +")");
				}
				//箭
				svg.append("path")
					.attr("d", "M700 -140 L705 -145 L465 110 L460 100 Z")
					.attr("fill", "#944");
				//心1
				draw(220,20,80,"#grad2");
				//心2
				draw(160,60,80,"#grad1");
				//箭
				svg.append("path")
					.attr("d", "M300 240 L305 245 L155 410 L150 400 Z")
					.attr("fill", "#944");
				svg.append("text")
					.attr("x", 250)
					.attr("y", 100)
					.attr("fill", "#C66")
					.attr("style", "font-weight:bold;font-size:24px")
					.attr("transform","rotate(50 130,450)")
					.text("糖LOVE兔");
			}
		</script>
	</head>
	<body>
		<svg version="1.1" xmlns="http://www.w3.org/2000/svg">
			<defs>
				<radialGradient id="grad1" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
					<stop offset="0%" style="stop-color:rgb(222,200,200);"/>
					<stop offset="100%" style="stop-color:rgb(255,0,0);"/>
				</radialGradient>
				<radialGradient id="grad2" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
					<stop offset="0%" style="stop-color:rgb(222,200,200);"/>
					<stop offset="100%" style="stop-color:rgb(255,80,0);"/>
				</radialGradient>
			</defs>
		</svg>
	</body>
</html>
